<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- Generated by IDLdoc 3.6.1 on Thu Aug 17 09:57:29 2017 -->

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <title>override_example-batch.pro (OMINAS Documentation)</title>

    

    <script type="text/javascript" src="idldoc-resources/js/jquery.js"></script>
    <script type="text/javascript" src="idldoc-resources/js/copybutton.js"></script>

    
    <style type="text/css" media="all">
            /* setup page */
      body { font-family: Helvetica, sans-serif; font-size: 12pt; margin: 0; padding: 0; }
      div.content { padding: 1em; }
      p { line-height: 1.4; }
      td p { padding-bottom: 0.5em; }
      img { border: 0; }
      
      /* link styles */
      a { text-decoration: none; }
      a:link, a:visited { color: #0000FF; }
      a:hover, a:focus { background: yellow; border-bottom: 1emx dotted #303099; }
      
      /* dir-overview styles */
      dt.filename { margin-top: 0.5em; }
      dl.file_listing { margin-left: 1em; }
      
      /* titles */
      h1, h2, h3, h4 { font-weight:normal; color: #871E31; margin-top: 1.5em; }
      h4 { margin-bottom: 0.25em; }
      .center { margin-left: auto; margin-right: auto; }
      .small { font-family: Verdana, Helvetica, sans-serif; font-size: 90%; }
      .smaller { font-family: Verdana, Helvetica, sans-serif; font-size: 80%; }
      .smallest { font-family: Verdana, Helvetica, sans-serif; font-size: 70%; }
      h1.basename { margin-top: 0; margin-bottom: 0; }
      h1.basename span.file-attributes { font-size: 70%; margin-left: 3em; color: #384806; }
      h2.directory { font-size: 90%; margin-bottom: 0; }
      h2.routine-name { margin-top: 0; margin-bottom: 0; }
      p.categories { color: #384806; margin-top: 0; }
      span.file_attribute { float: right; color: #384806; margin: 0 0 1em 3em; }
      div#file_comments { margin-top: 1em; }
      
      div.routine-details { border: 1px dotted #C0C0C0; margin-top: 1em; padding: 1em; }
      span.routine-attributes { font-size: 70%; margin-left: 3em; color: #384806; }
      div.details dt { color: #871E31; margin-left: 2em; }
      div.details dt span { color: #384806; margin-left: 2em; }
      div.details dd { margin: 0.5em 2em 1em 4em; }
      a.top {
        font-family: Verdana, Helvetica, sans-serif;
        font-size: 8pt;
        font-weight: bold;
        color: #5070ff;
        text-transform: uppercase;
        float: right;
        margin-left: 1em;
      }
      
      /* comments */
      .pre { white-space: pre; }
      
      /* code styles */
      code { font-family: Monaco, "Courier New", Courier, monospace; font-size: 95%; }
      code.listing { white-space: pre; display: block; margin: 0.75em 0 0.75em 0; padding: 0 3em 0 1em; line-height: 1.4em; }
      code.source { white-space: pre; display: block; }
      code.source span.comments { color: #408080; }
      .syntax { margin-top: 1em; margin-left: 1.5em; text-indent: -1.5em; }
      .var { font-style: italic; }
      .argument { } /* white-space: nowrap; does not work in Safari (and sometimes not even in Firefox) */
      
      dl.routine-summary dt { margin-bottom: 0.25em; }
      dl.routine-summary dd { margin-bottom: 0.5em; margin-left: 2em; }
      
      ul.inherited-method-summary { padding-left: 0em; margin-left: 0em; }
      
      /* general styles */
      ul li { list-style-type: none; }
      table { empty-cells: show; }
      thead { color: #871E31; }
      dd { margin-bottom: 0.35em; }
      input, textarea { background: #F3F6ED; border: #E1D6C6 1px solid; padding: 2px 1em 2px 0.5em; }
      input.text { background: #FFFFC0; }
      
      div.note { margin: 1em 2em 1em 2em; background: #EFEFEF; border: 1px #A0A0A0 dotted; padding: 0 1em 0 1em; }
      p.indent { margin-left: 2em; }
      
      /* An attribute table is a vertical list of name-value pairs. */
      table.box {
        background: #EFEFEF;
        border: 1px #A0A0A0 dotted;
        padding-top: 0.75em;
        padding-bottom: 0.75em;
      }
      table.attribute { padding-left: 0.75em; padding-right: 0.75em; }
      table td { vertical-align: top; }
      table.attribute p { margin: 0; }
      table td.name { font-style: normal; padding-right: 1.5em; }
      ul.fieldslist { padding-top: 0; color: #909090; }
      ul.fieldslist li { margin-bottom: 0.25em; }
      span.fieldname { color: #000000; }
      
      dl.attribute dt { color: #990000; }
      
      /* header/navbar styles */
      div.header { padding: 2em 2em 0 2em; background: #9E9D7B; border-bottom: 2px #262626 solid; }
      div.header h1 { color: white; margin:0; font-weight: normal; }
      div.header h2 { color: white; margin-top: 0; margin-bottom: 1em; font-weight: normal; font-style: italic; font-size: 100%; }
      table.navbar { background: #CCC097; margin: 0; padding: 0; border-bottom: 1px #262626 dotted; width: 100%; }
      table.navbar td { padding: 4px 0.5em 3px 0.5em; white-space: nowrap; vertical-align: top; }
      table.navbar td.flexible { width: 100%; text-align: right; padding-right: 1em; white-space: nowrap; }
      table.navbar td.selected { background: #262626; }
      table.navbar td.selected, table.navbar td.selected a { color: white; }
      table.navbar a:hover, table.navbar a:focus { background: inherit; border-bottom: 1px solid #303099; }
      p.localnavbar { text-align: right; margin: 0.2em 1em 0.2em 0.2em; padding: 0; }
      
      /* CSS graphics styles */
      div.box {
        margin-left: 0.25em;
        display: inline-block;
        width: 0.9em;
        height: 0.9em;
        vertical-align: -1px;
      }
      .red { background-color: #A00; }
      .orange { background-color: #F40; }
      .green { background-color: #480; }
      
      /* index styles */
      span.index_type { margin-left: 1em; }
      dl.index_listing dd { margin-bottom: 0.5em; margin-left: 2em; }
      dl.index_listing dd p { margin-top: 0.2em; margin-bottom: 0em; }
      
      /* search styles */
      fieldset { border: #ddd 1px solid; padding: 1em; margin-top: 3em; }
      legend { color: #871E31; font-size: 120%; }
      label { white-space: nowrap; }
      p.description { margin: 2em 2em 1em 2em; }
      form table td.name { vertical-align: middle; }
      
      /* footer styles */
      div.footer { padding: 0.5em 1em 0.5em 1em; background: #EFEFEF; border-top: 1px #A0A0A0 dotted; }
      div.footer table { width: 100%; }
      div.footer td.right { text-align: right; }

    </style>
    <style type="text/css" media="print">
            p.localnavbar { display: none; }
      
      div.header { background: white; }
      div.header h1 { color: black; }
      div.header h2 { color: black; }

    </style>
    

    <script type="text/javascript">
      function setTitle() {
        parent.document.title="override_example-batch.pro (OMINAS Documentation)";
      }
    </script>
  </head>

  <body onload="setTitle();" id="root">


    <div class="content">
      
      <h1 class="basename">override_example-batch.pro<span class="file-attributes"></span></h1>
      

      <span class="file_attribute small">batch file</span>
      
      
      <br/>

      
      <div id="file_comments">
        <div class="small "><p>                            OVERRIDE EXAMPLE
</p>

<p>  Created by Joe Spitale
</p>

<p>  This example demonstrates the use of OMINAS with no translators.  All
  geometric values are manually entered.  I don't know why you would
  want to do this, but it's a useful way to test OMINAS without needing
  any translator packages installed.
</p>

<p>  This example file can be executed from the UNIX command line using:
<div><div><code class="listing"></code></div></div>  	ominas override_example-batch
</p>

<p>  or from within IDL using:
<div><div><code class="listing"></code></div></div>  	@override_example-batch
</p>

<p>  After the example stops, later code samples in this file may be executed by
  pasting them at the IDL command prompt.
 READ AND DISPLAY IMAGE
</p>

<p>	<img src="graphics/saturn_load.jpeg"/>
</p>

<p>  DAT_READ is OMINAS' program for reading data files.  It figures out
  file readers, sorts out translators (or lack thereof), etc.  It returns
  a data descriptor (dd) -- an object containing the data array and a whole
  bunch of other stuff, most of which you'll probably never use:
<div><div><code class="listing"><span class="code-output"> dd = dat_read('./data/c3440346.gem', im, label)</span>
</code></div></div>  TVIM is OMINAS' basic image display program.  It's like WINDOW, except
  it sets up the data coordinate system so that all of your points will
  display properly:
<div><div><code class="listing"><span class="code-output"> tvim, im, zoom=0.5, /order, /new</span>
</code></div></div></p>

<p> OBTAIN GEOMETRY
</p>

<p>  Here we obtain the objects that describe the geometry of the data set
  contained in the data descriptor.  The camera descriptor (cd) contains
  the camera position, orientation, and relevant constant parameters.  The
  other objects -- planet descriptor (pd) and ring descriptor (rd) --
  describe the states of those bodies, as seen from the camera at the
  time of the observation.  /OVERRIDE tells the PG_GET_* programs not to
  call the translators.  Instead all values are entered manually, like
  in the good old days.
</p>

<p>   Camera descriptor:
<div><div><code class="listing"><span class="code-output">cd = pg_get_cameras(dd, /override, $</span>
<span class="code-output">       name='VGR1_ISS_NA', $</span>
<span class="code-output">       orient= $</span>
<span class="code-output">            [ [-0.177287575, -0.966450211, -0.185857758 ], $</span>
<span class="code-output">              [ 0.507898045, -0.251604865,  0.823853487 ], $</span>
<span class="code-output">              [ 0.842976092, -0.051662194, -0.535464589 ] ], $</span>
<span class="code-output">       avel=tr([0.0, 0.0, 0.0]), $</span>
<span class="code-output">       pos=tr([0.0, 0.0, 0.0]), $</span>
<span class="code-output">       vel=tr([0.0, 0.0, 0.0]), $</span>
<span class="code-output">       time=972603249.d, $</span>
<span class="code-output">       scale=[7.858656e-06,7.858656e-06], $</span>
<span class="code-output">       oaxis=[499.0,499.0], $</span>
<span class="code-output">       size=[1000,1000], $</span>
<span class="code-output">       fn_focal_to_image='cam_focal_to_image_linear', $</span>
<span class="code-output">       fn_image_to_focal='cam_image_to_focal_linear', $</span>
<span class="code-output">       fi_data=ptr_new() $</span>
<span class="code-output">  )</span>
</code></div></div>   Planet descriptor:
<div><div><code class="listing"><span class="code-output">pd = pg_get_planets(dd, od=cd, /override, $</span>
<span class="code-output">       name='SATURN', $</span>
<span class="code-output">       orient= $</span>
<span class="code-output">            [ [-0.254669368,  0.963251789,  0.085378596], $</span>
<span class="code-output">              [-0.962535206, -0.260997177,  0.073528563], $</span>
<span class="code-output">              [ 0.093110093, -0.063454432,  0.993631746] ], $</span>
<span class="code-output">       avel=tr([0.0854, 0.0732, 0.9937])*1.74e-4, $</span>
<span class="code-output">       pos=tr([-23433172000.0, -6105736000.0, -1223129375.0]), $</span>
<span class="code-output">       vel=[ tr([9500.0, 0.0, 0.0]), $</span>
<span class="code-output">             tr([0.0, 0.1, 0.0]) ], $</span>
<span class="code-output">       time=972603249.d, $</span>
<span class="code-output">       radii=[60268000.,60268000.,54364000.], $</span>
<span class="code-output">       lora=0.0 $</span>
<span class="code-output"> )</span>
</code></div></div>   Ring descriptor:
<div><div><code class="listing"><span class="code-output">rd = pg_get_rings(dd, pd=pd, od=cd, /override, $</span>
<span class="code-output">       name='MAIN_RING_SYSTEM', $</span>
<span class="code-output">       gd={bx0:pd}, $</span>
<span class="code-output">       orient= $</span>
<span class="code-output">            [ [-0.254669368,  0.963251789,  0.085378596], $</span>
<span class="code-output">              [-0.962535206, -0.260997177,  0.073528563], $</span>
<span class="code-output">              [ 0.093110093, -0.063454432,  0.993631746] ], $</span>
<span class="code-output">       avel=tr([0.0854, 0.0732, 0.9937])*1.74e-4, $</span>
<span class="code-output">       pos=tr([-23433172000.0, -6105736000.0, -1223129375.0]), $</span>
<span class="code-output">       vel=[tr([9500.0, 0.0, 0.0]), $</span>
<span class="code-output">            tr([0.0, 0.1, 0.0]) ] , $</span>
<span class="code-output">       time=972603249.d, $</span>
<span class="code-output">       sma=tr([75000000.0,136800000.0]), $</span>
<span class="code-output">       ecc=tr([0.0, 0.0]) $</span>
<span class="code-output"> )</span>
</code></div></div>   Star descriptor:
<div><div><code class="listing"><span class="code-output">ltd = pg_get_stars(dd, od=cd, /override, $</span>
<span class="code-output">       name='SUN', $</span>
<span class="code-output">       pos=tr([1.421392d12,4.3105676d10,-4.3613585d10]) $</span>
<span class="code-output">  )</span>
</code></div></div> -
</p>

<p> MAKE A GENERIC DESCRIPTOR
</p>

<p>  At this level, a generic descriptor is just a convenient shorthand
  to keep all of your object descriptors together.  All PG programs
  accept individual descriptor as well as generic descriptors as
  arguments.  GBX means any subclass of GLOBE, DKX means any SUBCLASS
  of DSK.  These are arguments to the PG programs that we'll be working
  with:
<div><div><code class="listing"><span class="code-output"> gd = {cd:cd, gbx:pd, dkx:rd, ltd:ltd}</span>
</code></div></div>  Here are a couple of tips regarding generic descriptors:
</p>

<p>   1) I never use them like this.
</p>

<p>   2) They are nevertheless a handy way to keep the full geometry of a
      scene in one place, and they're used all over the place way down in
      the core.
</p>

<p> COMPUTE OVERLAY ARRAYS
</p>

<p>  Here we compute various overlays using some PG programs.  The overlay
  arrays are contained in POINT objects; limb_ptd, ring_ptd, etc.  Note
  that the generic descriptor does not always contain enough information
  to get the job done.  PG_CENTER requires an explicit bx (arbitrary body)
  argument to tell it which of the bodies in gd are intended.  PG_HIDE
  hide the given points with respect to whatever bodies you give it:
<div><div><code class="listing"><span class="code-output"> limb_ptd = pg_limb(gd=gd, count=nlimb) & pg_hide, limb_ptd, gd=gd</span>
<span class="code-output"> ring_ptd = pg_disk(gd=gd, count=nring) & pg_hide, ring_ptd, gd=gd</span>
<span class="code-output"> shadow_ptd = pg_shadow_globe(gd=gd, ring_ptd)</span>
<span class="code-output"> center_ptd = pg_center(gd=gd, bx=pd)</span>
</code></div></div></p>

<p> PUT THE OVERLAYS IN ONE ARRAY
</p>

<p>  I seriously never do things this way, but I guess it illustrates various
  ways to use the software.  We're putting all of the POINT objects into
  one array, and making corresponding arrays for the colors, plotting
  symbols, etc.
</p>

<p>  The CT programs are used to get color indices for some basic colors
  without having to know what type of visual class you're using:
<div><div><code class="listing"><span class="code-output"> object_ptd = [center_ptd,limb_ptd,ring_ptd,shadow_ptd]</span>
<span class="code-output"> colors = [!p.color,ctyellow(),ctred(),ctred(),ctblue()]</span>
<span class="code-output"> psyms=[1,3,3,3,3]</span>
<span class="code-output"> psizes=[0.5]</span>
<span class="code-output"> plabels = [cor_name(pd), '', '']</span>
</code></div></div></p>

<p> DRAW EVERYTHING
</p>

<p>	<img src="graphics/saturn_grid.jpeg"/>
</p>

<p>  PG_DRAW is the basic program for drawing overlays in OMINAS.  It does
  the same thing as PLOTS (which you could use instead), but it accepts
  POINT objects are arguments and allows you to use specify multiple colors
  symbols, etc.  PG_DRAW also accepts raw points arrays (i.e. 2 x np):
<div><div><code class="listing"><span class="code-output"> pg_draw, object_ptd, $</span>
<span class="code-output">             colors=colors, psyms=psyms, psizes=psizes, plabel=plabels</span>
</code></div></div></p>

<p> MAKE IT OFFICIAL BY ADDING GRIDS
</p>

<p>	<img src="graphics/saturn_grid.jpeg"/>
</p>

<p>  PG_GRID will put a grid on just about anything.  At least anything
  with a surface described by two angle-like coordinates: a planet, a map,
  the sky, a disk (in that case, the radius is one of the coordinates), etc.
  Those kinds of coordinate systems are referred to as surface coordinate
  systems in OMINAS.  Because their representations are analogous, their
  corresponding objects can be pretty much interchanged all over the place.
  This is such a place.  On that topic, coordinate systems using image
  points (i.e., CAMERA and MAP image systems) are similarly interchangeable:
<div><div><code class="listing"><span class="code-output"> grid_ptd = pg_grid(gd=gd, bx=pd)</span>
<span class="code-output">    pg_hide, grid_ptd, gd=gd, bx=pd, /assoc</span>
<span class="code-output">    pg_hide, grid_ptd, gd=gd, bx=rd</span>
<span class="code-output"> pg_draw, grid_ptd, color=ctblue()</span>

<span class="code-output">dgrid_ptd = pg_grid(gd=gd, bx=rd) & pg_hide, dgrid_ptd, gd=gd, bx=pd</span>
<span class="code-output">pg_draw, dgrid_ptd, color=ctpurple()</span>
</code></div></div></p>

<p> DEFINE A RING SECTOR
</p>

<p>  Let's define a sector so we can make a plot of intensity vs. radius
  or longitude.  First, we'll specify the longitude and radius limits
  explicitly.  Note that we're working in meters here because all of our
  inputs for the descriptors were in meters.  Units in OMINAS are
  determined by the translators.  Of course, all angles are in radians:
<div><div><code class="listing"><span class="code-output"> lon = [175,177] * !dpi/180d</span>
<span class="code-output"> rad = [65000,138000] * 1000d</span>
<span class="code-output"> tvim,im</span>
<span class="code-output"> outline_ptd = pg_ring_sector(gd=gd, rad=rad, lon=lon)</span>
<span class="code-output"> pg_draw, outline_ptd, col=ctgreen()</span>
</code></div></div></p>

<p> MANUALLY DEFINE A RING SECTOR
</p>

<p>  You can also define the ring sector using the mouse.  Just leave out
  the bounds in the call to PG_RING_SECTOR.  Have we fixed that thing
  where the sector wraps around wrong?  You'd think so by now:
<div><div><code class="listing"><span class="code-output"> tvim,im</span>
<span class="code-output"> outline_ptd = pg_ring_sector(gd=gd)</span>
<span class="code-output"> pg_draw, outline_ptd, col=ctgreen()</span>

<span class="code-output">      .. image:: graphics/saturn_sector_1.jpeg</span>
</code></div></div></p>

<p> PLOT INTENSITY VS. RADIUS AND LONGITUDE
</p>

<p>  The POINT object returned by PG_RING_SECTOR can be used as an input
  to PG_PROFILE_RING to produce radial and azimuthal profiles.
  PG_PROFILE_RING returns a data descriptor containing the plot.  It
  also outputs the profile itself and the disk coordinates of each point
  in the profile so you don't have to dereference the data descriptor.
</p>

<p>  Radial scan:
<div><div><code class="listing"><span class="code-output"> dd_prof = pg_profile_ring(dd, gd=gd, outline_ptd, $</span>
<span class="code-output">                                         dsk_pts=dsk_pts, profile=profile)</span>
<span class="code-output"> window, /free, xs=500, ys=300</span>
<span class="code-output"> plot, dsk_pts[*,0], profile</span>

<span class="code-output">  .. image:: graphics/saturn_sector_2.jpeg</span>

</code></div></div>  Azimuthal scan:
<div><div><code class="listing"><span class="code-output"> dd_prof = pg_profile_ring(dd, gd=gd, outline_ptd, /azimuthal, $</span>
<span class="code-output">                                         dsk_pts=dsk_pts, profile=profile)</span>
<span class="code-output"> window, /free, xs=500, ys=300</span>
<span class="code-output"> plot, dsk_pts[*,1], profile, /yno</span>

<span class="code-output">  .. image:: graphics/saturn_sector_3.jpeg</span>
</code></div></div></p>

</div>
      </div>
      

      

      

      

      

      

      

      

      

      

      <div id="attributes">
        <h2>File attributes</h2>

        <table class="attribute small" summary="File attributes">
          <tr>
            <td class="name">Modification date:</td>
            <td>Mon Aug 14 16:37:49 2017</td>
          </tr>

          <tr>
            <td class="name">Lines:</td>
            <td>87</td>
          </tr>

          
          <tr>
            <td class="name">Docformat:</td>
            <td>rst rst</td>
          </tr>
          
        </table>
      </div>

      
    </div>

    <div class="footer">
    
      <table class="smaller" summary="footer">
        <tr>
          <td class="left">Produced by IDLdoc 3.6.1 on Thu Aug 17 09:57:29 2017</td>
          <td class="right"><a target="_top" href="http://github.com/mgalloy/idldoc">IDLdoc project information</a></td>
        </tr>
      </table>
    
    </div>
  </body>
</html>